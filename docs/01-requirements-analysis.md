# 需求分析文档

> 项目：Persona Knowledge Base V2
> 文档版本：v1.0
> 创建日期：2026-01-13
> 阶段：需求分析

---

## 📌 项目背景

### 用户画像
- 身份：学生 → 软件开发工作者
- 痛点：学习过的知识容易遗忘，难以组织管理
- 现状：已使用 Obsidian 记录笔记，形成本地 Markdown 知识库
- 期望：利用 AI 增强知识库管理能力

### 项目愿景
> 为个人学习者提供一个用于维护个人知识库的智能系统，利用 AI 大模型的文字处理能力，实现智能检索、自动整理、经验归档等功能。

---

## 🎯 核心功能需求

### 功能清单

| ID | 功能名称 | 功能描述 | 优先级 | 难度 |
|----|---------|---------|--------|------|
| F1 | 智能检索 | 理解用户需求，从知识库中检索相关信息并推送 | P0（最高） | 中 |
| F2 | 碎片信息整理 | 将日常碎片化记录总结成结构化文档，归档到对应条目 | P1（高） | 高 |
| F3 | 问答经验归档 | 自动总结 AI 解决问题的经验，归档到知识库 | P1（高） | 高 |
| F4 | 知识库优化建议 | 分析知识库结构，给出分类优化建议 | P2（中） | 中 |
| F5 | 用户画像上下文 | 将知识库作为 AI 助手上下文，提升问题解决精准度 | P3（低） | 高 |

---

## 🎬 核心使用场景

### 场景1：日常学习记录
**时间**：工作学习过程中 + 晚上休息前

**流程**：
```
工作/学习 → 边学边记（Obsidian） → 晚上总结梳理 → AI辅助整理 → 归档到 Obsidian 知识库
```

**期望**：
- 在 Obsidian 写笔记（不在应用内编辑）
- 快速检索相关知识（F1）
- AI 自动整理碎片信息并保存到 Obsidian（F2）

---

### 场景2：AI 问答归档（困难但重要）
**时间**：遇到问题时

**流程**：
```
遇到问题 → 在应用内向 AI 提问 → 共同解决问题 → AI 自动总结 → 归档到 Obsidian 知识库
```

**期望**：
- 完全自动化，无需手动操作
- 经验自动保存到 Obsidian

---

### 场景3：Obsidian 编辑监听（新增）
**时间**：用户在 Obsidian 编辑笔记时

**流程**：
```
用户在 Obsidian 编辑笔记 → 应用监听文件变化 → 自动刷新应用中的笔记列表
```

**期望**：
- 无需手动刷新应用
- 实时同步 Obsidian 的变化

---

## 🔧 技术约束与偏好

### 约束条件
1. **不重新开发编辑器**：管理 Obsidian 中的笔记
2. **文件格式**：本地 `.md` 文件
3. **笔记位置**：用户本地目录

### UI/UX 要求
- 界面：简洁美观
- UI 设计：非常重要
- 体验：优先保证用户体验

---

## 📊 功能优先级与开发顺序

### 开发原则
- 由易到难
- 学习曲线平滑
- 每个阶段产出可用的产品

### 开发顺序

#### 第一阶段：MVP（最小可行产品）
**目标**：验证核心概念

- ✅ F1：智能检索（最基础、最核心）
- ✅ 基础 UI 界面

**预期成果**：能够通过自然语言检索 Obsidian 笔记的桌面应用

---

#### 第二阶段：知识整理
- ✅ F2：碎片信息整理

**预期成果**：能够自动整理和结构化笔记内容

---

#### 第三阶段：高级功能
- ✅ F3：问答经验归档
- ✅ F4：知识库优化建议

**预期成果**：实现自动化经验积累和智能优化

---

#### 第四阶段：智能增强
- ✅ F5：用户画像上下文

**预期成果**：AI 助手深度了解用户，提供精准建议

---

## ❓ 待确认问题

### Q1：产品形态选择
**选项**：
- A. 独立桌面应用（Electron 等）
- B. Obsidian 插件
- C. Web 应用

**用户倾向**：插件好用但受接口限制；桌面应用更利于学习

**最终决策**：✅ **独立桌面应用（Electron）**

---

### Q2：AI 服务选择
**选项**：
- OpenAI (GPT-4/GPT-3.5)
- 智谱 AI
- 百度文心
- 阿里通义千问
- 其他

**最终决策**：✅ **DeepSeek**（暂定，后续可能调整）

---

### Q3：开发顺序调整
用户是否同意 F1 → F2 → F3/F4 → F5 的顺序？

**待决策**：✅ 初步同意，可能有调整

---

## 📚 学习目标（非功能需求）

用户明确表示：
- 希望学习项目开发
- 不只是做功能，还要学习开发流程
- Obsidian 插件开发可能不太满足学习需求
- 更倾向于完整的桌面应用开发

---

## 📈 下一步计划

1. ✅ **确认产品形态**：独立桌面应用（Electron）
2. ✅ **选择 AI 服务**：DeepSeek（暂定）
3. ✅ **技术选型**：Electron + React + TypeScript + LangChain + shadcn/ui
4. ✅ **架构设计**：模块化架构，已完成
5. ⏳ **接口设计**：已更新，明确职责分工
6. ⏳ **使用场景**：已补充完整场景

---

**文档状态**：需求分析完成 ✅
**版本**：v1.1（已更新使用场景和决策状态）
